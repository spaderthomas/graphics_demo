entity.CT_test = {}

entity.CT_test.components = {}
entity.CT_test.components.Task_Component = {}

# Give the trigger two scripts:
# 1. While waiting do nothing
entity.CT_test.scripts = {}
entity.CT_test.scripts.waiting = {
    {
	    kind = "Spin_Action",
		is_blocking = false
	}
}
# 2. When triggered, start the cutscene
entity.CT_test.scripts.playing = {
    {
		kind = "Cutscene_Action",
		is_blocking = false,
		which = "test"
	}
}

# Tie the waiting state to the waiting cutscene
# Plus, make it transition when the trigger flag is set
entity.CT_test.State_Machine = {}
entity.CT_test.State_Machine.waiting = {
    task = entity.CT_test.scripts.waiting,
	transitions = {
    	{
    	    vars = {
    		    should_play_test = true
    	    },
    		next_state = "playing"
    	}
	}
}

# Ditto for playing
entity.CT_test.State_Machine.playing = {
    task = entity.CT_test.scripts.playing,
	transitions = {
	    {
	        vars = {
	    	    should_play_test = false
	        },
		    next_state = "waiting"
	    }
	}
}